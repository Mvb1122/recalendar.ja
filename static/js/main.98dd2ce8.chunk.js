((self||this)["webpackJsonprecalendar.js"]=(self||this)["webpackJsonprecalendar.js"]||[]).push([[0],{284:function(e,t,a){},285:function(e,t,a){var n={"./en/app.json":[312,3],"./en/config.json":[313,4],"./en/pdf.json":[314,5],"./es/app.json":[315,6],"./es/config.json":[316,7],"./es/pdf.json":[317,8],"./fr/app.json":[318,9],"./fr/config.json":[319,10],"./fr/pdf.json":[320,11],"./pl/app.json":[321,12],"./pl/config.json":[322,13],"./pl/pdf.json":[323,14]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a.t(r,3)}))}r.keys=function(){return Object.keys(n)},r.id=285,e.exports=r},305:function(e,t,a){},308:function(e,t,a){var n={"./af":104,"./af.js":104,"./am":105,"./am.js":105,"./ar":106,"./ar-dz":107,"./ar-dz.js":107,"./ar-iq":108,"./ar-iq.js":108,"./ar-kw":109,"./ar-kw.js":109,"./ar-ly":110,"./ar-ly.js":110,"./ar-ma":111,"./ar-ma.js":111,"./ar-sa":112,"./ar-sa.js":112,"./ar-tn":113,"./ar-tn.js":113,"./ar.js":106,"./az":114,"./az.js":114,"./be":115,"./be.js":115,"./bg":116,"./bg.js":116,"./bi":117,"./bi.js":117,"./bm":118,"./bm.js":118,"./bn":119,"./bn.js":119,"./bo":120,"./bo.js":120,"./br":121,"./br.js":121,"./bs":122,"./bs.js":122,"./ca":123,"./ca.js":123,"./cs":124,"./cs.js":124,"./cv":125,"./cv.js":125,"./cy":126,"./cy.js":126,"./da":127,"./da.js":127,"./de":128,"./de-at":129,"./de-at.js":129,"./de-ch":130,"./de-ch.js":130,"./de.js":128,"./dv":131,"./dv.js":131,"./el":132,"./el.js":132,"./en":133,"./en-au":134,"./en-au.js":134,"./en-ca":135,"./en-ca.js":135,"./en-gb":136,"./en-gb.js":136,"./en-ie":137,"./en-ie.js":137,"./en-il":138,"./en-il.js":138,"./en-in":139,"./en-in.js":139,"./en-nz":140,"./en-nz.js":140,"./en-sg":141,"./en-sg.js":141,"./en-tt":142,"./en-tt.js":142,"./en.js":133,"./eo":143,"./eo.js":143,"./es":144,"./es-do":145,"./es-do.js":145,"./es-mx":146,"./es-mx.js":146,"./es-pr":147,"./es-pr.js":147,"./es-us":148,"./es-us.js":148,"./es.js":144,"./et":149,"./et.js":149,"./eu":150,"./eu.js":150,"./fa":151,"./fa.js":151,"./fi":152,"./fi.js":152,"./fo":153,"./fo.js":153,"./fr":154,"./fr-ca":155,"./fr-ca.js":155,"./fr-ch":156,"./fr-ch.js":156,"./fr.js":154,"./fy":157,"./fy.js":157,"./ga":158,"./ga.js":158,"./gd":159,"./gd.js":159,"./gl":160,"./gl.js":160,"./gom-latn":161,"./gom-latn.js":161,"./gu":162,"./gu.js":162,"./he":163,"./he.js":163,"./hi":164,"./hi.js":164,"./hr":165,"./hr.js":165,"./ht":166,"./ht.js":166,"./hu":167,"./hu.js":167,"./hy-am":168,"./hy-am.js":168,"./id":169,"./id.js":169,"./index.d.ts":309,"./is":170,"./is.js":170,"./it":171,"./it-ch":172,"./it-ch.js":172,"./it.js":171,"./ja":173,"./ja.js":173,"./jv":174,"./jv.js":174,"./ka":175,"./ka.js":175,"./kk":176,"./kk.js":176,"./km":177,"./km.js":177,"./kn":178,"./kn.js":178,"./ko":179,"./ko.js":179,"./ku":180,"./ku.js":180,"./ky":181,"./ky.js":181,"./lb":182,"./lb.js":182,"./lo":183,"./lo.js":183,"./lt":184,"./lt.js":184,"./lv":185,"./lv.js":185,"./me":186,"./me.js":186,"./mi":187,"./mi.js":187,"./mk":188,"./mk.js":188,"./ml":189,"./ml.js":189,"./mn":190,"./mn.js":190,"./mr":191,"./mr.js":191,"./ms":192,"./ms-my":193,"./ms-my.js":193,"./ms.js":192,"./mt":194,"./mt.js":194,"./my":195,"./my.js":195,"./nb":196,"./nb.js":196,"./ne":197,"./ne.js":197,"./nl":198,"./nl-be":199,"./nl-be.js":199,"./nl.js":198,"./nn":200,"./nn.js":200,"./oc-lnc":201,"./oc-lnc.js":201,"./pa-in":202,"./pa-in.js":202,"./pl":203,"./pl.js":203,"./pt":204,"./pt-br":205,"./pt-br.js":205,"./pt.js":204,"./ro":206,"./ro.js":206,"./ru":207,"./ru.js":207,"./rw":208,"./rw.js":208,"./sd":209,"./sd.js":209,"./se":210,"./se.js":210,"./si":211,"./si.js":211,"./sk":212,"./sk.js":212,"./sl":213,"./sl.js":213,"./sq":214,"./sq.js":214,"./sr":215,"./sr-cyrl":216,"./sr-cyrl.js":216,"./sr.js":215,"./ss":217,"./ss.js":217,"./sv":218,"./sv-fi":219,"./sv-fi.js":219,"./sv.js":218,"./sw":220,"./sw.js":220,"./ta":221,"./ta.js":221,"./te":222,"./te.js":222,"./tet":223,"./tet.js":223,"./tg":224,"./tg.js":224,"./th":225,"./th.js":225,"./tk":226,"./tk.js":226,"./tl-ph":227,"./tl-ph.js":227,"./tlh":228,"./tlh.js":228,"./tr":229,"./tr.js":229,"./types.d.ts":310,"./tzl":230,"./tzl.js":230,"./tzm":231,"./tzm-latn":232,"./tzm-latn.js":232,"./tzm.js":231,"./ug-cn":233,"./ug-cn.js":233,"./uk":234,"./uk.js":234,"./ur":235,"./ur.js":235,"./uz":236,"./uz-latn":237,"./uz-latn.js":237,"./uz.js":236,"./vi":238,"./vi.js":238,"./x-pseudo":239,"./x-pseudo.js":239,"./yo":240,"./yo.js":240,"./zh":241,"./zh-cn":242,"./zh-cn.js":242,"./zh-hk":243,"./zh-hk.js":243,"./zh-tw":244,"./zh-tw.js":244,"./zh.js":241};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=308},311:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(7),i=a.n(r),s=a(31),c=a(247),o=a(2),l=a.n(o),d=a(54),j=a(42),h=a.n(j),u=a(70),b=(a(284),a(248)),p=a.n(b),f=a(249),m=a.n(f),g=a(250),v=a.n(g),O=a(251),y=a.n(O),x=a(252),k=a.n(x),w=a(253),C=a.n(w),I=a(254),D=a.n(I),N=a(255),S=a.n(N);i.a.extend(p.a),i.a.extend(m.a),i.a.extend(v.a),i.a.extend(y.a),i.a.extend(k.a),i.a.extend(C.a),i.a.extend(D.a),i.a.extend(S.a);var P={type:"backend",read:function(e,t,n){a(285)("./"+e+"/"+t+".json").then((function(e){n(null,e)})).catch((function(e){n(e,null)}))}},R=a(19),T=a(23),A=a(27),F=a(25),L=a(325),z=a(21),M=a(13),W=a(256),E=a(17),G=a(24),U=a(91),B=a(69),K=a(86),q=a(18),H=a(278),Y=a(20);function _(){return new Worker(a.p+"static/js/pdf.worker.c4f80010.worker.js")}var J=a(1),V=function(e){var t=e.blobUrl,a=e.title;return Object(J.jsx)("iframe",{title:a,src:t,width:"100%",height:"100%"})},Q=a(279),X=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={elapsedTime:0},e.updateProgress=function(){e.setState({elapsedTime:e.state.elapsedTime+700})},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.intervalId=setInterval(this.updateProgress,700)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state.elapsedTime/this.props.expectedTime*100;return Object(J.jsx)(Q.a,{animated:!0,now:e})}}]),a}(l.a.Component),Z=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"renderPdfPreview",value:function(){var e=this.props,t=e.blobUrl,a=e.isGeneratingPdf,n=e.isGeneratingPreview,r=e.onDownload,i=e.t;return Object(J.jsxs)(Y.a,{direction:"vertical",className:"h-100",children:[Object(J.jsx)(V,{blobUrl:t,title:i("preview.viewer-title")}),Object(J.jsxs)(Y.a,{direction:"vertical",gap:2,className:"py-3 position-sticky bg-body refresh-button",children:[Object(J.jsx)(G.a,{variant:"secondary",disabled:n||a,onClick:r,children:a?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(d.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1"}),i("preview.generating.full")]}):i("configuration.button.download")}),a&&Object(J.jsx)(X,{expectedTime:this.props.expectedTime})]})]})}},{key:"renderNoPreview",value:function(){var e=this.props,t=e.t;return e.isGeneratingPreview?Object(J.jsxs)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:[Object(J.jsx)(d.a,{animation:"border",role:"status",size:"sm",className:"me-1"}),t("preview.generating.preview")]}):Object(J.jsxs)(Y.a,{direction:"vertical",className:"h-100 d-flex align-items-center justify-content-center text-center",children:[Object(J.jsx)("p",{className:"lead",children:t("preview.empty.title")}),Object(J.jsx)("p",{children:t("preview.empty.subtitle")})]})}},{key:"render",value:function(){var e=this.props,t=e.blobUrl,a=e.isGeneratingPreview;return t&&!a?this.renderPdfPreview():this.renderNoPreview()}}]),a}(l.a.PureComponent),$=Object(L.a)("app")(Z),ee=a(64),te=a.n(ee),ae=a(77),ne=a(44),re=a(276),ie=a(79),se=a(43),ce=a(48),oe="item",le="lines",de="new_page",je=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderRow=function(t,a){var n=t.type,r=t.value;switch(n){case oe:return e.renderItem(r,a);case de:return e.renderNewPage(r,a);case le:default:return e.renderLines(r,a)}},e}return Object(T.a)(a,[{key:"renderItem",value:function(e,t){var a=this.props,n=a.field,r=a.onChange;return Object(J.jsxs)(ce.a,{children:[Object(J.jsx)(se.a,{placeholder:"Itinerary item",value:e,onChange:r,"data-index":t,"data-type":oe,"data-field":n,required:!0}),this.renderRemoveButton(t)]},t)}},{key:"renderNewPage",value:function(e,t){var a=this.props.t;return Object(J.jsxs)(ce.a,{children:[Object(J.jsx)(ce.a.Text,{className:"flex-grow-1",children:a("configuration.itinerary.placeholder.page")}),this.renderRemoveButton(t)]},t)}},{key:"renderLines",value:function(e,t){var a=this.props,n=a.field,r=a.onChange,i=a.t;return Object(J.jsxs)(ce.a,{children:[Object(J.jsx)(ie.a,{className:"flex-grow-1",controlId:"lines-"+t,label:i("configuration.itinerary.placeholder.lines"),children:Object(J.jsx)(se.a,{placeholder:i("configuration.itinerary.placeholder.lines"),type:"number",min:1,max:50,value:e,onChange:r,"data-index":t,"data-type":le,"data-field":n,required:!0})}),this.renderRemoveButton(t)]},t)}},{key:"renderRemoveButton",value:function(e){var t=this.props,a=t.field,n=t.onRemove,r=t.t;return Object(J.jsx)(G.a,{variant:"outline-danger",onClick:n,"data-index":e,"data-field":a,children:r("configuration.itinerary.button.remove")})}},{key:"render",value:function(){var e=this.props,t=e.eventKey,a=e.field,n=e.itinerary,r=e.onAdd,i=e.t,s=e.title,c=Object(J.jsxs)(E.a.Item,{eventKey:t||"0",children:[Object(J.jsx)(E.a.Header,{children:s}),Object(J.jsxs)(E.a.Body,{children:[Object(J.jsxs)(Y.a,{gap:2,children:[n.map(this.renderRow),0===n.length&&Object(J.jsx)(ne.a,{variant:"secondary",className:"mb-0",children:i("configuration.itinerary.empty")})]}),Object(J.jsxs)(Y.a,{direction:"horizontal",className:"mt-3",gap:3,children:[Object(J.jsx)(G.a,{variant:"outline-secondary",onClick:r,"data-type":oe,"data-field":a,children:i("configuration.itinerary.button.item")}),Object(J.jsx)(G.a,{variant:"outline-secondary",onClick:r,"data-type":le,"data-field":a,children:i("configuration.itinerary.button.lines")}),Object(J.jsx)(G.a,{variant:"outline-secondary",onClick:r,"data-type":de,"data-field":a,children:i("configuration.itinerary.button.page")})]})]})]});return t?c:Object(J.jsx)(E.a,{className:"mt-3",defaultActiveKey:"0",children:c})}}]),a}(l.a.Component),he=Object(L.a)("app")(je),ue=a(29);function be(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(ae.a)(te.a.mark((function e(t,a){var n,r,i,s,c,o,l,d,j;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.PDFDocument.load(t,{updateMetadata:!1});case 3:if((n=e.sent).catalog.has(ue.PDFName.of("Names"))){e.next=6;break}return e.abrupt("return",void 0);case 6:if((r=n.catalog.lookup(ue.PDFName.of("Names"),ue.PDFDict)).has(ue.PDFName.of("EmbeddedFiles"))){e.next=9;break}return e.abrupt("return",void 0);case 9:if((i=r.lookup(ue.PDFName.of("EmbeddedFiles"),ue.PDFDict)).has(ue.PDFName.of("Names"))){e.next=12;break}return e.abrupt("return",void 0);case 12:s=i.lookup(ue.PDFName.of("Names"),ue.PDFArray),c=0,o=s.size();case 14:if(!(c<o)){e.next=25;break}if(s.lookup(c).decodeText()===a){e.next=18;break}return e.abrupt("continue",22);case 18:return l=s.lookup(c+1,ue.PDFDict),d=l.lookup(ue.PDFName.of("EF"),ue.PDFDict).lookup(ue.PDFName.of("F"),ue.PDFStream),j=Object(ue.decodePDFRawStream)(d).decode(),e.abrupt("return",JSON.parse(new TextDecoder("utf-8").decode(j)));case 22:c+=2,e.next=14;break;case 25:e.next=30;break;case 27:return e.prev=27,e.t0=e.catch(0),e.abrupt("return",void 0);case 30:return e.abrupt("return",void 0);case 31:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}var fe=["year","month","firstDayOfWeek","monthCount","isMonthOverviewEnabled","habits","monthItinerary","isWeekOverviewEnabled","todos","dayItineraries","isWeekRetrospectiveEnabled","weekRetrospectiveItinerary","specialDates"],me="config.json";function ge(e){return fe.reduce((function(t,a){return Object(n.a)(Object(n.a)({},t),{},Object(M.a)({},a,e[a]))}),{})}var ve=function e(){Object(R.a)(this,e),this.year=i()().year(),this.month=0,this.firstDayOfWeek=i.a.localeData().firstDayOfWeek(),this.monthCount=12,this.fontFamily="Lato",this.fontDefinition={family:this.fontFamily,fonts:[{src:"/fonts/Lato/Lato-Regular.ttf"},{src:"/fonts/Lato/Lato-Italic.ttf",fontStyle:"italic"},{src:"/fonts/Lato/Lato-Bold.ttf",fontWeight:700},{src:"/fonts/Lato/Lato-BoldItalic.ttf",fontStyle:"italic",fontWeight:700}]},this.isMonthOverviewEnabled=!0,this.habits=[Object(s.c)("habits.example1",{ns:"config"}),Object(s.c)("habits.example2",{ns:"config"}),Object(s.c)("habits.example3",{ns:"config"}),Object(s.c)("habits.example4",{ns:"config"})],this.monthItinerary=[{type:oe,value:"Main goal"},{type:le,value:2},{type:oe,value:"Notes"},{type:le,value:50}],this.isWeekOverviewEnabled=!0,this.todos=["Plan a trip","Some other TODO"],this.dayItineraries=Object(z.a)(Array(7).keys()).map((function(){return[{type:le,value:50}]})),this.isWeekRetrospectiveEnabled=!0,this.weekRetrospectiveItinerary=[{type:le,value:50}],this.pageSize=["157mm","209mm"],this.specialDates={"01-01":["Special date 1","Special date for reason #2"],"03-01":["Some other celebration"],"13-01":["Some other other celebration that is very long","Let's add another one"],"14-01":["Ran out of reasons celebration"]}},Oe="EMPTY",ye="LOADING",xe="ERROR",ke="SUCCESS",we="BASIC",Ce="ADVANCED",Ie="BLANK",De="MINIMALISTIC",Ne=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={status:Oe},e.handleTemplateSelect=function(t){var a=new ve;switch(t.target.dataset.template){case we:break;case Ce:a.dayItineraries=Object(z.a)(Array(7).keys()).map((function(){return[{type:oe,value:"Super advanced"},{type:le,value:50}]}));break;case Ie:a.specialDates={},a.habits=[],a.monthItinerary=[],a.todos=[],a.dayItineraries=Object(z.a)(Array(7).keys()).map((function(){return[]})),a.weekRetrospectiveItinerary=[];break;case De:a.specialDates={},a.habits=[],a.isMonthOverviewEnabled=!1,a.monthItinerary=[],a.isWeekOverviewEnabled=!1,a.todos=[],a.dayItineraries=Object(z.a)(Array(7).keys()).map((function(){return[]})),a.isWeekRetrospectiveEnabled=!1,a.weekRetrospectiveItinerary=[];break;default:return}e.props.onConfigChange(a)},e.handleFileChange=function(t){e.setState({status:ye});var a=t.target.files[0],n=new FileReader;n.onload=e.handleFileLoad,n.readAsArrayBuffer(a)},e.handleFileLoad=function(){var t=Object(ae.a)(te.a.mark((function t(a){var n;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be(a.target.result,me);case 2:if(n=t.sent){t.next=6;break}return e.setState({status:xe}),t.abrupt("return");case 6:e.setState({status:ke}),e.props.onConfigChange(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(T.a)(a,[{key:"renderStatusMessage",value:function(){var e=this.props.t;switch(this.state.status){case ye:return Object(J.jsx)(ne.a,{variant:"info",className:"mt-2 mb-0",children:e("configuration.selector.upload.loading")});case xe:return Object(J.jsx)(ne.a,{variant:"danger",className:"mt-2 mb-0",children:e("configuration.selector.upload.error")});case ke:return Object(J.jsx)(ne.a,{variant:"success",className:"mt-2 mb-0",children:e("configuration.selector.upload.success")});case Oe:default:return null}}},{key:"render",value:function(){var e=this.props.t;return Object(J.jsxs)(Y.a,{children:[Object(J.jsx)(q.a.Label,{children:e("configuration.selector.template.label")}),Object(J.jsxs)(re.a,{"aria-label":"Config templates",children:[Object(J.jsx)(G.a,{variant:"info","data-template":we,onClick:this.handleTemplateSelect,children:e("configuration.selector.template.basic")}),Object(J.jsx)(G.a,{variant:"primary","data-template":Ce,onClick:this.handleTemplateSelect,children:e("configuration.selector.template.advanced")}),Object(J.jsx)(G.a,{variant:"blank","data-template":Ie,onClick:this.handleTemplateSelect,children:e("configuration.selector.template.blank")}),Object(J.jsx)(G.a,{variant:"dark","data-template":De,onClick:this.handleTemplateSelect,children:e("configuration.selector.template.minimalistic")})]}),Object(J.jsxs)(q.a.Group,{controlId:"configurationFile",className:"mt-3",children:[Object(J.jsx)(q.a.Label,{children:e("configuration.selector.upload.label")}),Object(J.jsx)(q.a.Control,{type:"file",accept:".pdf",onChange:this.handleFileChange}),this.renderStatusMessage()]})]})}}]),a}(l.a.Component),Se=Object(L.a)(["app"])(Ne),Pe=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderItem=function(t,a){var n=e.props,r=n.field,i=n.onChange,s=n.t;return Object(J.jsxs)(ce.a,{children:[Object(J.jsx)(se.a,{placeholder:s("configuration.items-list.placeholder"),value:t,onChange:i,"data-index":a,"data-field":r,required:!0}),e.renderRemoveButton(a)]},a)},e}return Object(T.a)(a,[{key:"renderRemoveButton",value:function(e){var t=this.props,a=t.field,n=t.onRemove,r=t.t;return Object(J.jsx)(G.a,{variant:"outline-danger",onClick:n,"data-index":e,"data-field":a,children:r("configuration.items-list.button.remove")})}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.field,n=e.onAdd,r=e.t,i=e.title;return Object(J.jsx)(E.a,{className:"mt-3",defaultActiveKey:"0",children:Object(J.jsxs)(E.a.Item,{eventKey:"0",children:[Object(J.jsx)(E.a.Header,{children:i}),Object(J.jsxs)(E.a.Body,{children:[Object(J.jsxs)(Y.a,{gap:2,children:[t.map(this.renderItem),0===t.length&&Object(J.jsx)(ne.a,{variant:"secondary",className:"mb-0",children:r("configuration.items-list.empty")})]}),Object(J.jsx)(Y.a,{direction:"horizontal",className:"mt-3",children:Object(J.jsx)(G.a,{variant:"outline-secondary",onClick:n,"data-field":a,children:r("configuration.items-list.button.item")})})]})]})})}}]),a}(l.a.Component),Re=Object(L.a)("app")(Pe),Te=a(85),Ae=a(96),Fe="DD-MM",Le=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={date:"",value:""},e.onChange=function(t){var a=t.target.dataset.field;e.setState(Object(M.a)({},a,t.target.value))},e.onAddClick=function(t){var a=i()(e.state.date,"YYYY-MM-DD").format(Fe);e.props.onAdd(a,e.state.value),e.setState({date:"",value:""})},e.renderItem=function(t){var a=e.props.items[t],n=i()(t,Fe);return Object(J.jsx)(Ae.a.Item,{children:Object(J.jsxs)(Y.a,{direction:"horizontal",gap:3,children:[Object(J.jsx)("b",{className:"special-date",children:n.format("MMMM DD")}),Object(J.jsx)("div",{children:a.map((function(e,a){return Object(J.jsx)("div",{children:e},t+a)}))}),e.renderRemoveButton(t)]})},t)},e}return Object(T.a)(a,[{key:"renderItems",value:function(e){return Object(J.jsx)(Ae.a,{children:e.map(this.renderItem)})}},{key:"renderRemoveButton",value:function(e){var t=this.props,a=t.onRemove,n=t.t;return Object(J.jsx)(G.a,{className:"ms-auto",variant:"outline-danger",onClick:a,"data-key":e,children:n("configuration.special-dates.button.remove")})}},{key:"render",value:function(){var e=this.state,t=e.date,a=e.value,n=this.props,r=n.items,i=n.t,s=Object.keys(r);return Object(J.jsxs)(E.a.Item,{eventKey:"specialDates",children:[Object(J.jsx)(E.a.Header,{children:Object(J.jsxs)(Y.a,{direction:"horizontal",className:"w-100",children:[i("configuration.special-dates.title"),Object(J.jsx)(Te.a,{bg:"info",className:"ms-auto me-3",children:s.length})]})}),Object(J.jsxs)(E.a.Body,{children:[Object(J.jsx)("p",{children:i("configuration.special-dates.description")}),Object(J.jsx)(Y.a,{gap:2,children:s?this.renderItems(s):Object(J.jsx)(ne.a,{variant:"secondary",className:"mb-0",children:i("configuration.special-dates.empty")})}),Object(J.jsx)(Y.a,{direction:"horizontal",className:"mt-3",children:Object(J.jsxs)(ce.a,{children:[Object(J.jsx)(se.a,{className:"flex-grow-0 date-field",value:t,onChange:this.onChange,type:"date","data-field":"date"}),Object(J.jsx)(se.a,{placeholder:i("configuration.special-dates.placeholder"),value:a,onChange:this.onChange,"data-field":"value"}),Object(J.jsx)(G.a,{variant:"outline-secondary",disabled:!t||!a,onClick:this.onAddClick,children:i("configuration.special-dates.button.item")})]})})]})]})}}]),a}(l.a.Component),ze=Object(L.a)("app")(Le),Me=a(277);var We=Object(L.a)("app")((function(e){var t=e.children,a=e.id,n=e.onToggle,r=e.t,i=e.title,s=e.toggledOn,c=r(s?"configuration.toggle-form.enabled":"configuration.toggle-form.disabled");return Object(J.jsxs)(E.a.Item,{eventKey:a,children:[Object(J.jsx)(E.a.Header,{children:Object(J.jsxs)(Y.a,{direction:"horizontal",className:"w-100",children:[i,Object(J.jsx)(Te.a,{bg:s?"success":"secondary",className:"ms-auto me-3",children:c})]})}),Object(J.jsx)(E.a.Body,{children:Object(J.jsxs)(Y.a,{children:[Object(J.jsx)(Me.a,{className:"mb-1",id:a,type:"checkbox",variant:"outline-success",checked:s,onChange:n,children:c}),t]})})]})}));function Ee(){var e=i.a.weekdays(),t=i.a.weekdaysMin(),a=i.a.weekdaysShort(),n=i.a.localeData().firstDayOfWeek(),r=Object(z.a)(Array(7).keys());return[].concat(Object(z.a)(r.slice(n)),Object(z.a)(r.slice(0,n))).map((function(n){return{full:e[n],short:a[n],min:t[n]}}))}a(304),a(305);var Ge=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(e){var r;return Object(R.a)(this,a),(r=t.call(this,e)).state=Object(n.a)({isGeneratingPdf:!1,isGeneratingPreview:!1,blobUrl:null,lastPreviewTime:1e4,lastFullTime:null},ge(r.props.initialState)),r.handleConfigChange=function(e){r.setState(Object(n.a)({},ge(e)))},r.handleFieldChange=function(e){r.setState(Object(M.a)({},e.target.id,e.target.value))},r.handleToggle=function(e){r.setState(Object(M.a)({},e.target.id,e.target.checked))},r.handleDownload=function(e){r.setState({isGeneratingPdf:!0}),r.generatePdf(!1)},r.handleItemAdd=function(e){var t=e.target.dataset.field,a=Object(z.a)(r.state[t]);a.push(""),r.setState(Object(M.a)({},t,a))},r.handleItemChange=function(e){var t=e.target.dataset.field,a=Object(z.a)(r.state[t]);a[e.target.dataset.index]=e.target.value,r.setState(Object(M.a)({},t,a))},r.handleItemRemove=function(e){var t=e.target.dataset.field,a=Object(z.a)(r.state[t]);a.splice(e.target.dataset.index,1),r.setState(Object(M.a)({},t,a))},r.handleItineraryAdd=function(e){var t=e.target.dataset.field,a=Object(z.a)(r.state[t]);a.push({type:e.target.dataset.type,value:""}),r.setState(Object(M.a)({},t,a))},r.handleItineraryChange=function(e){var t=e.target.dataset.field,a=Object(z.a)(r.state[t]);a[e.target.dataset.index]={type:e.target.dataset.type,value:e.target.dataset.value},r.setState(Object(M.a)({},t,a))},r.handleItineraryRemove=function(e){var t=e.target.dataset.field,a=Object(z.a)(r.state[t]);a.splice(e.target.dataset.index,1),r.setState(Object(M.a)({},t,a))},r.handlePreview=function(e){e.preventDefault(),r.setState({isGeneratingPreview:!0}),r.generatePdf(!0)},r.handlePdfWorkerMessage=function(e){var t=e.data.blob,a=r.state.isGeneratingPdf;if(r.state.isGeneratingPreview){var n=(new Date).getTime()-r.startTime.getTime();r.setState({blobUrl:URL.createObjectURL(t),lastPreviewTime:n})}if(r.setState({isGeneratingPdf:!1,isGeneratingPreview:!1}),a){var i=(new Date).getTime()-r.startTime.getTime();r.setState({lastFullTime:i}),Object(W.saveAs)(t,"recalendar.pdf")}},r.handlePdfGeneration=function(e){e.blob,e.url;var t=e.loading,a=(e.error,r.props.t);return a(t?"loading":"download-ready")},r.handleDayItineraryChange=function(e){var t=Object(z.a)(r.state.dayItineraries),a=e.target.dataset,n=a.field,i=a.index,s=a.type;t[n][i]={type:s,value:e.target.value},r.setState({dayItineraries:t})},r.handleDayItineraryRemove=function(e){var t=Object(z.a)(r.state.dayItineraries),a=e.target.dataset,n=a.field,i=a.index;t[n].splice(i,1),r.setState({dayItineraries:t})},r.handleDayItineraryAdd=function(e){var t=Object(z.a)(r.state.dayItineraries),a=e.target.dataset,n=a.field,i=a.type;t[n].push({type:i,value:""}),r.setState({dayItineraries:t})},r.handleSpecialDateAdd=function(e,t){var a=Object.assign({},r.state.specialDates);a[e]||(a[e]=[]),a[e].push(t),r.setState({specialDates:a})},r.handleSpecialDateRemove=function(e){var t=e.target.dataset.key,a=Object.assign({},r.state.specialDates);delete a[t],r.setState({specialDates:a})},r.renderDayItinerary=function(e,t){var a=e.full;return Object(J.jsx)(he,{eventKey:t.toString(),field:t.toString(),title:a,itinerary:r.state.dayItineraries[t],onAdd:r.handleDayItineraryAdd,onChange:r.handleDayItineraryChange,onRemove:r.handleDayItineraryRemove},a)},r.pdfWorker=new _,r.pdfWorker.onmessage=r.handlePdfWorkerMessage,r}return Object(T.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.blobUrl&&t.blobUrl!==this.state.blobUrl&&URL.revokeObjectURL(t.blobUrl)}},{key:"generatePdf",value:function(e){this.startTime=new Date,this.pdfWorker.postMessage(Object(n.a)({isPreview:e,language:s.b.language},ge(this.state)))}},{key:"renderMonths",value:function(){return i.a.localeData().months().map((function(e,t){return Object(J.jsx)("option",{value:t,children:e},t)}))}},{key:"renderDaysOfWeek",value:function(){return i.a.localeData().weekdays().map((function(e,t){return Object(J.jsx)("option",{value:t,children:e},t)}))}},{key:"renderConfigurationForm",value:function(){var e=this.props.t,t=this.state,a=t.isGeneratingPdf,n=t.isGeneratingPreview;return Object(J.jsxs)(q.a,{onSubmit:this.handlePreview,children:[Object(J.jsxs)(E.a,{defaultActiveKey:"start",className:"my-3",children:[Object(J.jsxs)(E.a.Item,{eventKey:"start",children:[Object(J.jsx)(E.a.Header,{children:e("configuration.selector.label")}),Object(J.jsx)(E.a.Body,{children:Object(J.jsx)(Se,{onConfigChange:this.handleConfigChange})})]}),Object(J.jsxs)(E.a.Item,{eventKey:"general",children:[Object(J.jsx)(E.a.Header,{children:e("configuration.general.label")}),Object(J.jsxs)(E.a.Body,{children:[Object(J.jsxs)(q.a.Group,{controlId:"year",children:[Object(J.jsx)(q.a.Label,{children:e("configuration.general.year")}),Object(J.jsx)(q.a.Control,{type:"number",value:this.state.year,onChange:this.handleFieldChange})]}),Object(J.jsxs)(q.a.Group,{controlId:"month",children:[Object(J.jsx)(q.a.Label,{children:e("configuration.general.starting-month.label")}),Object(J.jsx)(q.a.Select,{value:this.state.month,onChange:this.handleFieldChange,children:this.renderMonths()}),Object(J.jsx)(q.a.Text,{className:"text-muted",children:e("configuration.general.starting-month.description")})]}),Object(J.jsxs)(q.a.Group,{controlId:"firstDayOfWeek",children:[Object(J.jsx)(q.a.Label,{children:e("configuration.general.first-day-of-week")}),Object(J.jsx)(q.a.Select,{value:this.state.firstDayOfWeek,onChange:this.handleFieldChange,children:this.renderDaysOfWeek()})]}),Object(J.jsxs)(q.a.Group,{controlId:"monthCount",children:[Object(J.jsx)(q.a.Label,{children:e("configuration.general.month-count.label")}),Object(J.jsx)(q.a.Control,{type:"number",value:this.state.monthCount,onChange:this.handleFieldChange,min:1,max:12}),Object(J.jsx)(q.a.Text,{className:"text-muted",children:e("configuration.general.month-count.description")})]})]})]}),Object(J.jsx)(ze,{items:this.state.specialDates,onAdd:this.handleSpecialDateAdd,onRemove:this.handleSpecialDateRemove}),Object(J.jsxs)(We,{id:"isMonthOverviewEnabled",title:e("configuration.month.title"),onToggle:this.handleToggle,toggledOn:this.state.isMonthOverviewEnabled,children:[Object(J.jsx)("p",{className:"mb-0",children:e("configuration.month.description")}),Object(J.jsx)(Re,{field:"habits",title:e("configuration.month.habits.title"),items:this.state.habits,onAdd:this.handleItemAdd,onChange:this.handleItemChange,onRemove:this.handleItemRemove}),Object(J.jsx)(he,{field:"monthItinerary",title:e("configuration.month.itinerary.title"),itinerary:this.state.monthItinerary,onAdd:this.handleItineraryAdd,onChange:this.handleItineraryChange,onRemove:this.handleItineraryRemove})]}),Object(J.jsxs)(We,{id:"isWeekOverviewEnabled",title:e("configuration.week.title"),onToggle:this.handleToggle,toggledOn:this.state.isWeekOverviewEnabled,children:[Object(J.jsx)("p",{className:"mb-0",children:e("configuration.week.description")}),Object(J.jsx)(Re,{field:"todos",title:e("configuration.week.todos.title"),items:this.state.todos,onAdd:this.handleItemAdd,onChange:this.handleItemChange,onRemove:this.handleItemRemove})]}),Object(J.jsxs)(E.a.Item,{eventKey:"dayItineraries",children:[Object(J.jsx)(E.a.Header,{children:e("configuration.day.title")}),Object(J.jsx)(E.a.Body,{children:Object(J.jsx)(E.a,{defaultActiveKey:"0",children:Ee().map(this.renderDayItinerary)})})]}),Object(J.jsxs)(We,{id:"isWeekRetrospectiveEnabled",title:e("configuration.week.retrospective.title"),onToggle:this.handleToggle,toggledOn:this.state.isWeekRetrospectiveEnabled,children:[Object(J.jsx)("p",{className:"mb-0",children:e("configuration.week.retrospective.description")}),Object(J.jsx)(he,{field:"weekRetrospectiveItinerary",title:e("configuration.week.retrospective.itinerary.title"),itinerary:this.state.weekRetrospectiveItinerary,onAdd:this.handleItineraryAdd,onChange:this.handleItineraryChange,onRemove:this.handleItineraryRemove})]})]}),Object(J.jsxs)(Y.a,{direction:"vertical",gap:2,className:"pt-3 position-sticky bg-body refresh-button",children:[Object(J.jsx)(G.a,{variant:"primary",className:"w-100",disabled:n||a,type:"submit",children:n?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(d.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1"}),e("configuration.button.generating")]}):e("configuration.button.refresh")}),n&&Object(J.jsx)(X,{expectedTime:this.state.lastPreviewTime}),Object(J.jsx)(q.a.Text,{className:"text-muted pb-3",children:e("configuration.generation-description")})]})]})}},{key:"render",value:function(){var e=this.props.t;return Object(J.jsx)(K.a,{className:"h-100",fluid:!0,children:Object(J.jsxs)(H.a,{className:"h-100",children:[Object(J.jsx)(B.a,{children:this.renderConfigurationForm()}),Object(J.jsx)(B.a,{children:Object(J.jsx)("div",{className:"pt-3 pb-3 position-sticky top-0 vh-100",children:Object(J.jsxs)(U.a,{className:"h-100",children:[Object(J.jsxs)(U.a.Header,{children:[e("preview.title")," ",Object(J.jsx)("small",{className:"text-muted",children:e("preview.subtitle")})]}),Object(J.jsx)(U.a.Body,{className:"pb-0",children:Object(J.jsx)($,{blobUrl:this.state.blobUrl,expectedTime:this.state.lastFullTime||12*this.state.lastPreviewTime,isGeneratingPdf:this.state.isGeneratingPdf,isGeneratingPreview:this.state.isGeneratingPreview,onDownload:this.handleDownload})})]})})})]})})}}]),a}(l.a.PureComponent),Ue=Object(L.a)(["app"])(Ge),Be=a(46),Ke=a(71),qe=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(R.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={language:s.b.language},e.handleLanguageSelection=function(e){var t=e.target.value;Object(s.a)(t)},e.handleLanguageChange=function(t){e.setState({language:t})},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){s.b.on("languageChanged",this.handleLanguageChange)}},{key:"componentWillUnmount",value:function(){s.b.off("languageChanged",this.handleLanguageChange)}},{key:"render",value:function(){var e=this.props.t;return Object(J.jsx)(Ke.a,{bg:"dark",variant:"dark",expand:"md",children:Object(J.jsxs)(K.a,{fluid:!0,children:[Object(J.jsx)(Ke.a.Brand,{href:"/",children:"ReCalendar"}),Object(J.jsx)(Ke.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(J.jsxs)(Ke.a.Collapse,{id:"basic-navbar-nav",children:[Object(J.jsxs)(Be.a,{className:"me-auto",variant:"pills",children:[Object(J.jsx)(Be.a.Item,{children:Object(J.jsx)(Be.a.Link,{href:"/",children:e("navigation.home")})}),Object(J.jsx)(Be.a.Item,{children:Object(J.jsx)(Be.a.Link,{href:"/create",active:!0,children:e("navigation.configuration")})}),Object(J.jsx)(Be.a.Item,{children:Object(J.jsx)(Be.a.Link,{href:"/features",children:e("navigation.features")})}),Object(J.jsx)(Be.a.Item,{children:Object(J.jsx)(Be.a.Link,{href:"/faq",children:e("navigation.faq")})})]}),Object(J.jsxs)(Y.a,{direction:"horizontal",children:[Object(J.jsx)(q.a.Label,{column:!0,className:"text-light me-3",htmlFor:"languagePicker",children:e("language.label")}),Object(J.jsxs)(q.a.Select,{"aria-label":e("language.label"),className:"language-select",value:this.state.language,onChange:this.handleLanguageSelection,children:[Object(J.jsx)("option",{value:"en",children:e("language.english")}),Object(J.jsx)("option",{value:"fr",children:e("language.french")}),Object(J.jsx)("option",{value:"es",children:e("language.spanish")}),Object(J.jsx)("option",{value:"pl",children:e("language.polish")})]})]})]})]})})}}]),a}(l.a.Component),He=Object(L.a)(["app"])(qe),Ye=function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.setState({config:new ve})}},{key:"render",value:function(){return this.state&&this.state.config?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(He,{}),Object(J.jsx)(Ue,{initialState:this.state.config})]}):null}}]),a}(l.a.Component),_e=Object(L.a)(["app","config"])(Ye);s.b.use(P).use(c.a).use(u.e).init(Object(n.a)({},{debug:!1,fallbackLng:"en",supportedLngs:["en","pl","fr","es"],ns:["app","pdf","config"],interpolation:{escapeValue:!1}})),s.b.on("languageChanged",(function(e){a(308)("./"+e),i.a.locale(e),i.a.updateLocale(e,{weekStart:1})}));var Je=Object(J.jsx)(d.a,{className:"position-absolute top-50 start-50",animation:"border",variant:"primary",role:"status",children:Object(J.jsx)("span",{className:"visually-hidden",children:"Loading..."})});h.a.render(Object(J.jsx)(l.a.StrictMode,{children:Object(J.jsx)(o.Suspense,{fallback:Je,children:Object(J.jsx)(_e,{})})}),document.getElementById("root"))}},[[311,1,2]]]);
//# sourceMappingURL=main.98dd2ce8.chunk.js.map